##########################
WEBPACK TASKS WITH LOADERS
######################################
I.	CSS/SCSS FILES
II.	MANAGE VENDOR PACKAGES
III.	CONTENT HASHES AND CACHE BUSTING
		HTML PLUGIN
IV.	PRODUCTION MODE v DEV MODE
		A.	WEBPACK DEV SERVER
		B.	SPLIT AND MERGE
V.	PROD: START CLEAN
VI.	PROD: EXTRACT CSS FOR PRODUCTION
VII.	PROD: HANDLING IMAGES/FILES
VIII.	PROD: MINIFY MAIN FILES
######################################

Loaders allow webpack to process other types of files and convert them into valid modules that can be consumed by your application and added to the dependency graph.

Install the respective loaders through NPM.

####################
I.	CSS/SCSS FILES
####################

IMPORTANT: 

	- import the main.scss into the INDEX.JS
	- node-sass needs to be installed

Loaders have two properties in the webpack configuration:

The TEST property identifies which file or files should be transformed, using a RegExp. 
		
	test: /\.scss$/ files that end in .scss 

The USE property indicates which loader should be used to do the transforming.
	
	use: [loader3, loader2, loader1]

	IMPORTANT: reverse-order!

     "style-loader", //  3. inject styles into DOM
     "css-loader",   //  2. turn css into commonjs
     "sass-loader"   //  1. turn sass into css

Thus the scss is compiled into regular css through sass-loader, the css-loader puts into commonjs inside the index.js file. The style-loader injects a <style> into the HTML so the browser can import the css styles.

IMPORTANT: You still have to import the main.bundle.js into the HTML file.


############################
II.	MANAGE VENDOR PACKAGES
############################

The vendor.js is used to import external libraries such as bootstrap or jquery. Put the vendor.js in the ./src folder and simply import the packages.

Webpack will automatically update the index.html with the required script tags.


######################################
III.	CONTENT HASHES AND CACHE BUSTING
######################################

To avoid issues with browser caching during the dev or build process you can add content hashes to the main files. Each time the files have changed webpack adds a new hash and updates the references in other files. This process is called cache busting.

To add this functionality add [contenthash] to the filename in output.

	filename: '[name].bundle.[contenthash].js'

In order to have the HTML updated each time there is a new contenthash generated you have to use a HTML template and a plugin to let the HTML file be build by webpack.

	HTML WEBPACK PLUGIN

npm install --save-dev html-webpack-plugin

NOTE: 
	- require in the package in the webpack config file
	- PLUGINS in the webpack config accepts an ARRAY of plugins.
	
	new htmlWebpackPlugin({template: 'path/template.html'})

The plugin will generate an index.html file in the dist folder with the updated contenthash AND use the template.html content as a basis.


################################	
III.	PRODUCTION MODE v DEV MODE
################################	

A.	WEBPACK DEV SERVER

Install and run the webpack-dev-server. It will automatically update the bundle files and inject it into the browser, just as Gulp+BrowserSync.

	npm install --save-dev webpack-dev-server

Update package.json:

	"start": "webpack-dev-server --config webpack.dev.js --open

B.	SPLIT/MERGE

Install the webpack-merge package and split the webpack.config.js into three files: 

	npm install --save-dev webpack-merge

In the COMMON webpack config file:
	- define entry points
	- define output
	- html-loader and file-loader

In the DEV webpack config file:
	- mode: 'development
	- html plugin
	- scss loaders

In the PROD webpack config file:
	- mode: 'production'
	- optimization
	- style plugins and loaders


#######################
IV.	RPOD: START CLEAN
#######################

Start each build with a clean dist folder with the Clean Webpack Plugin.

	npm install --save-dev clean-webpack-plugin

Require the plugin through a variable const.
Call the function under plugins: {new plugin()}

NOTE: plugin are constructor functions! Use Captial.


######################################
V.	PROD: EXTRACT CSS FOR PRODUCTION
######################################

Injecting CSS through JS is not good for performance in the browser. Thus generate a normal .css file through webpack in the build process. A link tag will injected into the HTML as well.

	npm install --save-dev mini-css-extract-plugin

This plugin comes with a loader you can use to adjust the style-loader rules. 

	require in the plugin
	loader: MiniCssExtractPlugin.loader

	plugins: new MiniCssExtractPlugin()


#################################
VI.	PROD: HANDLING IMAGES/FILES
#################################

Files and images will get copied from the assets folder to the dist folder with a contenthash added. Also the filepaths in the final HTML will be updated automatically.

The HTML loader will search the HTML file for files and images. Once found webpack will handle all those files through the require('') method.

But for this to work you need an additional loader: file-loader. The file-loader will copy the files from the asset folder to the dist folder with a specific name that you can configure through the options. Other options would be compression, for example. See documentation for full list.

	npm install --save dev html-loader file-loader
	
	common config file
		test: html
		use: html loader
		
		test: files
		use: {
			loader: file-loader
			options: {
				name:[name].[hash].[ext]
				outputPath

#############################
VII.	PROD: MINIFY MAIN FILES
#############################

Optimize CSS/JS and HTML files: minification.

	npm install --save-dev optimize-css-assets-webpack-plugin

NOTE: by adding the optimize-css plugin the default webpack settings for the build process are overruled. That is why you have to manually configure the terser-plugin to minify JS.
Since the plugin is part of webpack you don't have install it through NPM. You can also other plugins such as uglify but that require an npm install.

	require in
	optimization: {
		minimizer: [
			new OptimizeCssAssets()	// css minification
			new TerserPlugin()		// js minification
			new HtmlWebpackPlugin()	// html template+min
				template
				minify:{collapsewhite: true, removeCom:true